(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{114:function(e,t,n){e.exports=n(519)},119:function(e,t,n){},51:function(e,t){},514:function(e,t,n){},519:function(e,t,n){"use strict";n.r(t);var a=n(1),l=n.n(a),o=n(104),c=n.n(o),r=(n(119),n(42)),s=n(20),i=n(23),u=n(17),m=n(27),d=n(22);n(514);var h=function(e){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:e.signOut},l.a.createElement("h2",{className:"m-2"},"Sign Out"))))};var g=function(e){return Object(a.useEffect)((function(){}),[]),l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:e.isLoggedIn?"App-header":"App-header bg-blue"},e.needsVerify?l.a.createElement("div",null,l.a.createElement("h1",null,"Enter Verification code from your email"),l.a.createElement("input",{type:"verification",className:"form-control",id:"verification",placeholder:"Verification code",name:"verification",onChange:e.handleInputChange}),l.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-primary mt-2 mr-3",onClick:e.handleVerify},l.a.createElement("h2",null,"Submit Code")),l.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-primary mt-2 ml-3",onClick:e.handleResendVerification},l.a.createElement("h2",null,"Submit Code"))):l.a.createElement("div",null,e.isLoggedIn?l.a.createElement(u.b,{to:"/about"},"About"):e.isRegistered?l.a.createElement("div",null,l.a.createElement("h1",{className:"header-light"}," Welcome back!"),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"username",className:"header-light"},"Username"),l.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",name:"username",onChange:e.handleInputChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password",className:"header-light"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",name:"password",onChange:e.handleInputChange})),l.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-primary",onClick:e.signIn},l.a.createElement("h2",null,"Sign in")))):l.a.createElement("div",null,l.a.createElement("h1",null," Greetings Newcomer"),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email",className:"header-light"},"Email"),l.a.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",name:"email",onChange:e.handleInputChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"username",className:"header-light"},"Username"),l.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",name:"username",onChange:e.handleInputChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password",className:"header-light"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",name:"password",onChange:e.handleInputChange}))),l.a.createElement("button",{type:"submit",value:"Submit",className:"my-3 btn btn-primary",onClick:e.signUp},l.a.createElement("h2",null,"Sign up")),l.a.createElement("h5",{className:"header-light"}," Already have an accout?"),l.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-primary",onClick:e.handleHasRegistered},l.a.createElement("h4",null,"Sign in"))))))};var f=function(e){var t="/assets/game-builds/"+e.build+".zip";return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header light-yellow"},e.hasDownloaded?l.a.createElement("div",null,l.a.createElement("h1",null,"You've downloaded the game!"),l.a.createElement("h4",{className:"my-3"},e.displaySuccess?l.a.createElement("span",{className:"highlight"},"Copied to clipboard!"):l.a.createElement("span",null,"Get your access token here")),l.a.createElement("button",{id:"data-token",type:"button",className:"btn btn-primary",onClick:e.setAccessToken},l.a.createElement("h2",{className:"m-2"},"Access Token")),l.a.createElement("h5",{className:"mt-5"},"If you can't find the download in your downloads folder, press the button below"),l.a.createElement("button",{onClick:e.handleDownloadLost,type:"button",className:"btn btn-warning my-3"},"Lost Download")):l.a.createElement("div",null,l.a.createElement("h1",null,"Download Instructions"),l.a.createElement("h5",null,"If you don't have software to open ZIP files, follow the WinRAR link below."),l.a.createElement("h5",null,"Once you've downloaded the ZIP file, open the file and run the 'launch.exe' file to play."),l.a.createElement("h4",{className:"mt-4"},"WinRAR 'trial' download"),l.a.createElement("a",{className:"winRAR",href:"https://www.rarlab.com/rar/winrar-x64-580.exe"}," Windows "),l.a.createElement("a",{className:"winRAR",href:"https://www.rarlab.com/rar/rarosx-5.8.0.tar.gz"}," Mac "),l.a.createElement("h4",{className:"mt-3 mb-2"},"Download my Game!"),l.a.createElement("button",{id:"download-btn",htmlFor:"download-link",type:"button",className:"btn btn-primary mt-3",onClick:e.setAccessToken},l.a.createElement(u.b,{id:"download-link",onClick:e.handleDownload,to:t,target:"_blank",download:!0},l.a.createElement("h3",null,"Download"))))))};var p=function(e){return Object(a.useEffect)((function(){e.DB_getPlayers(),e.DB_getMessages()}),[]),l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"light-yellow"},l.a.createElement("h1",{className:"mt-20 py-5"},"Data"),l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-5"},l.a.createElement("h3",null,"Connected Players"),e.players?function(e){var t=e.players,n=!1;return l.a.createElement("div",null,t.map((function(e){return e.key=Math.random(),l.a.createElement("div",null,"Default_Player"===e.username?null:l.a.createElement("h3",null,e.username,n=!0),l.a.createElement("br",null))})),n?null:l.a.createElement("span",null,"There are no players connected to any game lobbies"))}(e):l.a.createElement("p",null,"No players connected")),l.a.createElement("div",{className:"col-5"},l.a.createElement("h3",null,"Global Message Board"),l.a.createElement("ul",{className:"list-group text-left"},e.generateMessages(),l.a.createElement("input",{id:"message-input",name:"message",className:"list-group-item my-1",type:"text",placeholder:"Type a message...",onChange:e.handleInputChange,value:e.message}),l.a.createElement("button",{className:"list-group-item col-3",onClick:e.handleSendMessage},"Send message"))))))};var b=function(e){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header light-yellow"},l.a.createElement("h1",null,"About Me"),l.a.createElement("h3",null,"I'm Brian Graf")))};var E=function(e){return e.isLoggedIn?l.a.createElement("ul",{className:"nav justify-content-center pt-2"},e.isLoggedIn?null:l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/login",className:"nav-link"},l.a.createElement("h3",null,"Login/Register"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/play",className:"nav-link"},l.a.createElement("h3",null,"Download"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/data",className:"nav-link"},l.a.createElement("h3",null,"Data"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/about",className:"nav-link"},l.a.createElement("h3",null,"About"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/home",className:"nav-link"},l.a.createElement("h3",null,"Sign Out")))):null},y={getPlayers:function(){return fetch("api/players").then((function(e){if(200!==e.status){console.error("problem found with status code : ".concat(e.status)),console.warn("Returning dummy response");return[{_id:"12345abc_dummy",connection_id:"D5e315_dummy",username:"Dummy Player",connected:!0,__v:0,key:.333334}]}return e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},getUser:function(e){return fetch("/api/users/".concat(e)).then((function(e){return 200!==e.status&&console.error("problem found with status code : ".concat(e.status)),e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},createUser:function(e){return fetch("api/users/create",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 200!==e.status?e.status:e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},updateUser:function(e,t){return fetch("/api/users/".concat(e),{method:"PUT",body:JSON.stringify(Object(s.a)({},t,{username:e})),headers:{"Content-Type":"application/json"}}).then((function(e){return 200!==e.status?e.status:e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},getMessages:function(){return fetch("api/messages").then((function(e){return e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},createMessage:function(e){return fetch("/api/messages/create",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 200!==e.status?e.status:e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))}},w="Game-Buildv2.0";var v=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),v=Object(i.a)(c,2),N=v[0],S=v[1],O=Object(a.useState)(!1),j=Object(i.a)(O,2),k=j[0],C=j[1],I=Object(a.useState)([]),_=Object(i.a)(I,2),D=_[0],T=_[1],A=Object(a.useState)({name:"login",message:""}),M=Object(i.a)(A,2),P=M[0],R=M[1],U=Object(a.useState)(!1),x=Object(i.a)(U,2),L=x[0],B=x[1],J=Object(a.useState)({active:!1}),V=Object(i.a)(J,2),W=V[0],F=V[1],G=Object(a.useState)(null),H=Object(i.a)(G,2),z=H[0],Z=H[1];function q(e){e.persist(),W.accessToken?(console.log("Now that's efficency!"),ne(e.target,W.accessToken)):me(P.username,e)}return(Object(a.useEffect)((function(){d.a.currentAuthenticatedUser().then((function(e){me(e.username,{}),R(Object(s.a)({},P,{username:e.username})),!0!==n&&o(!0),!0!==k&&de(e.username)})).catch((function(e){console.log(e),!1!==n&&o(!1),!0!==k&&(localStorage.getItem("registered")?C(!0):C(!1))})),localStorage.getItem("hasDownloaded")?B(!0):!1!==L&&B(!1),W.active||(F(Object(s.a)({},W,{active:!0})),setInterval((function(){K(),X()}),1e4))}),[]),l.a.createElement("div",null,l.a.createElement(u.a,null,l.a.createElement(E,{isLoggedIn:!!n}),l.a.createElement(m.b,{exact:!0,path:"/login",render:function(e){return l.a.createElement(g,Object.assign({},e,{isRegistered:!!k,signIn:re,signUp:se,handleInputChange:$,isLoggedIn:n,handleHasRegistered:ae,needsVerify:N,handleVerify:oe,handleResendVerification:ce}))}}),l.a.createElement(m.b,{exact:!0,path:"/home",render:function(e){return l.a.createElement(h,Object.assign({},e,{signOut:ue}))}}),l.a.createElement(m.b,{exact:!0,path:"/play",render:function(e){return l.a.createElement(f,Object.assign({},e,{handleDownload:ee,handleDownloadLost:te,hasDownloaded:L,build:w,setAccessToken:q,displaySuccess:W.displaySuccess}))}}),l.a.createElement(m.b,{exact:!0,path:"/data",render:function(e){return l.a.createElement(p,Object.assign({},e,{players:D,DB_getPlayers:K,generateMessages:Y,DB_getMessages:X,handleInputChange:$,message:P.message,handleSendMessage:le}))}}),l.a.createElement(m.b,{exact:!0,path:"/about",render:function(e){return l.a.createElement(b,e)}}),l.a.createElement(m.b,{path:"/*",render:function(e){if(!n)return l.a.createElement(m.a,{to:"/login"})}}))));function Y(){return z&&z[0].message.trim().length>1?z.map((function(e){return l.a.createElement("li",{key:Math.random(),className:"list-group-item"},l.a.createElement("b",null,e.username," : "),e.message)})):null}function K(){y.getPlayers().then((function(e){T(e)})).catch((function(e){console.error(e)}))}function Q(e){return new Promise((function(t,n){y.getUser(e).then((function(e){e.length>0?t(JSON.stringify(e)):t(null)})).catch((function(e){console.error(e),n(e)}))}))}function X(){return new Promise((function(e,t){y.getMessages().then((function(t){t&&t.length>0&&(t.length>5?(console.log("Too many messages in MongoDB to display them all"),Z(t.slice(t.length-5,t.length))):Z(t)),e(t)})).catch((function(e){console.error(e),t(e)}))}))}function $(e){var t=e.target,n=t.value,a=t.name;console.log(a),console.log(n),R(Object(s.a)({},P,Object(r.a)({},a,n)))}function ee(e){localStorage.setItem("hasDownloaded",!0),!0!==L&&B(!0)}function te(e){localStorage.removeItem("hasDownloaded"),!1!==L&&B(!1)}function ne(e,t){if(e)if("data-token"!==e.id&&"download-btn"!==e.id)console.log("We did not click on the button"),ne(e.parentNode,t);else{var n=t,a=document.createElement("textarea");a.value=n,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),console.log("Copied to clipboard!"),W.displaySuccess||(F(Object(s.a)({},W,{accessToken:n,displaySuccess:!0})),setTimeout((function(){F(Object(s.a)({},W,{accessToken:n,displaySuccess:!1}))}),2e3))}}function ae(){C(!0)}function le(e){var t={username:P.username,message:P.message};t.message.trim().length>2?(y.createMessage(t),R(Object(s.a)({},P,{message:""}))):console.log("Message was too short.  Did not send")}function oe(e){e.preventDefault(),d.a.confirmSignUp(P.username,P.verification).then((function(){console.log(P.verification),console.log("Successfully verified"),o(!0),S(!1),ie(P.username)})).catch((function(e){console.log("Failed to verify"),console.error(e)}))}function ce(e){e.preventDefault(),d.a.resendSignUp(P.username).then((function(){console.log("Successfully resent code")}))}function re(e){if(e.preventDefault(),P)if(P.username&&P.password){var t=P.username,n=P.password;d.a.signIn(t,n).then((function(e){ie(t)})).catch((function(e){console.log(e)}))}else console.warn("Missing username or password for login")}function se(e){if(P)if(P.username&&P.password&&P.email){var t=P.username,n=P.password,a=P.email;Q(t).then((function(e){e?alert("Username is taken"):d.a.signUp({username:t,password:n,attributes:{email:a}}).then((function(e){console.log("Signing up user"),S(!0)})).catch((function(e){console.log(e),console.warn("Could not log in")}))})).catch((function(e){console.log(e)}))}else console.warn("We do not have a filled username, password, and/or, email")}function ie(e){de(e),o(!0)}function ue(){d.a.signOut().then((function(e){o(!1)})).catch((function(e){return console.log(e)}))}function me(e,t){d.a.currentSession().then((function(n){var a=n.getAccessToken().getJwtToken();F(Object(s.a)({},W,{accessToken:a})),function(e,t){y.updateUser(e,t).then((function(e){})).catch((function(e){console.log(e)}))}(e,{accessToken:a}),function(e){var t={username:e};Q(e).then((function(e){e||y.createUser(t).then((function(e){})).catch((function(e){console.error(e)}))})).catch((function(e){console.log(e)}))}(e),t.target&&ne(t.target,a)})).catch((function(e){console.error(e),alert("We could not get your user information.  Have you verified your email?"),console.error("Could not get current session data")}))}function de(e){localStorage.setItem("registered",e),C(!0)}},N={aws_project_region:"us-west-2",aws_cognito_identity_pool_id:"us-west-2:86736dd0-37e3-40b1-855c-74b662e25a2b",aws_cognito_region:"us-west-2",aws_user_pools_id:"us-west-2_NMn2yeWJ4",aws_user_pools_web_client_id:"58loi7nseg85g322jcphun0ql9",oauth:{domain:"unitynodeauth8acddaf0-8acddaf0-local.auth.us-west-2.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"http://localhost:3000/",redirectSignOut:"http://localhost:3000/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS"};d.b.configure(N),c.a.render(l.a.createElement(v,null),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.c3972d56.chunk.js.map