(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{137:function(e,t,a){e.exports=a(568)},142:function(e,t,a){},560:function(e,t){},563:function(e,t,a){},568:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(127),c=a.n(l),r=(a(142),a(48)),s=a(26),i=a(30),u=a(17),m=a(25),d=a(27);a(537),a(563);var h=function(e){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:e.signOut},o.a.createElement("h2",{className:"m-2"},"Sign Out"))))};var p=function(e){return Object(n.useEffect)((function(){}),[]),o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:e.isLoggedIn?"App-header":"App-header bg-blue"},e.isLoggedIn?o.a.createElement(u.b,{to:"/about"},"About"):e.isRegistered?o.a.createElement("div",null,o.a.createElement("h1",{className:"header-light"}," Welcome back!"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"username",className:"header-light"},"Username"),o.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",name:"username",onChange:e.handleInputChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password",className:"header-light"},"Password"),o.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",name:"password",onChange:e.handleInputChange})),o.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-primary",onClick:e.signIn},o.a.createElement("h2",null,"Sign in")))):o.a.createElement("div",null,o.a.createElement("h1",null," Greetings Newcomer"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"email",className:"header-light"},"Email"),o.a.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",name:"email",onChange:e.handleInputChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"username",className:"header-light"},"Username"),o.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",name:"username",onChange:e.handleInputChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password",className:"header-light"},"Password"),o.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",name:"password",onChange:e.handleInputChange}))),o.a.createElement("button",{type:"submit",value:"Submit",className:"my-3 btn btn-primary",onClick:e.signUp},o.a.createElement("h2",null,"Sign up")),o.a.createElement("h5",{className:"header-light"}," Already have an accout?"),o.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-primary",onClick:e.handleHasRegistered},o.a.createElement("h4",null,"Sign in")))))};var g=function(e){var t="/assets/game-builds/"+e.build+".zip";return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header light-yellow"},e.hasDownloaded?o.a.createElement("div",null,o.a.createElement("h1",null,"You've downloaded the game!"),o.a.createElement("h4",{className:"my-3"},e.displaySuccess?o.a.createElement("span",{className:"highlight"},"Copied to clipboard!"):o.a.createElement("span",null,"Get your access token here")),o.a.createElement("button",{id:"data-token",type:"button",className:"btn btn-primary",onClick:e.setAccessToken},o.a.createElement("h2",{className:"m-2"},"Access Token")),o.a.createElement("h5",{className:"mt-5"},"If you can't find the download in your downloads folder, press the button below"),o.a.createElement("button",{onClick:e.handleDownloadLost,type:"button",className:"btn btn-warning my-3"},"Lost Download")):o.a.createElement("div",null,o.a.createElement("h1",null,"Download Instructions"),o.a.createElement("h5",null,"If you don't have software to open ZIP files, follow the WinRAR link below."),o.a.createElement("h5",null,"Once you've downloaded the ZIP file, open the file and run the 'launch.exe' file to play."),o.a.createElement("h4",{className:"mt-4"},"WinRAR 'trial' download"),o.a.createElement("a",{className:"winRAR",href:"https://www.rarlab.com/rar/winrar-x64-580.exe"}," Windows "),o.a.createElement("a",{className:"winRAR",href:"https://www.rarlab.com/rar/rarosx-5.8.0.tar.gz"}," Mac "),o.a.createElement("h4",{className:"mt-3 mb-2"},"Download my Game!"),o.a.createElement("button",{id:"download-btn",htmlFor:"download-link",type:"button",className:"btn btn-primary mt-3",onClick:e.setAccessToken},o.a.createElement(u.b,{id:"download-link",onClick:e.handleDownload,to:t,target:"_blank",download:!0},o.a.createElement("h3",null,"Download"))))))};var f=function(e){return Object(n.useEffect)((function(){e.DB_getPlayers(),console.log("Using data effect")}),[]),o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header light-yellow"},o.a.createElement("h1",null,"Data"),o.a.createElement("h3",null,"Connected Players"),e.players?function(e){var t=e.players;return o.a.createElement("div",null,t.map((function(e){return e.key=Math.random(),o.a.createElement("div",null,"Default_Player"===e.username?null:o.a.createElement("h3",null,e.username))})))}(e):o.a.createElement("p",null,"No players connected")))};var b=function(e){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header light-yellow"},o.a.createElement("h1",null,"About Me"),o.a.createElement("h3",null,"I'm Brian Graf")))};var E=function(e){return console.log(e),e.isLoggedIn?o.a.createElement("ul",{className:"nav justify-content-center pt-2"},e.isLoggedIn?null:o.a.createElement("li",{className:"nav-item"},o.a.createElement(u.b,{to:"/login",className:"nav-link"},o.a.createElement("h3",null,"Login/Register"))),o.a.createElement("li",{className:"nav-item"},o.a.createElement(u.b,{to:"/play",className:"nav-link"},o.a.createElement("h3",null,"Download"))),o.a.createElement("li",{className:"nav-item"},o.a.createElement(u.b,{to:"/data",className:"nav-link"},o.a.createElement("h3",null,"Data"))),o.a.createElement("li",{className:"nav-item"},o.a.createElement(u.b,{to:"/about",className:"nav-link"},o.a.createElement("h3",null,"About"))),o.a.createElement("li",{className:"nav-item"},o.a.createElement(u.b,{to:"/home",className:"nav-link"},o.a.createElement("h3",null,"Sign Out")))):null},w={getPlayers:function(){return fetch("api/players").then((function(e){if(200!==e.status){console.error("problem found with status code : ".concat(e.status)),console.warn("Returning dummy response");return[{_id:"12345abc_dummy",connection_id:"D5e315_dummy",username:"Dummy Player",connected:!0,__v:0,key:.333334}]}return e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},getUser:function(e){return fetch("/api/users/".concat(e)).then((function(e){return 200!==e.status&&console.error("problem found with status code : ".concat(e.status)),e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},createUser:function(e){return fetch("api/users/create",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 200!==e.status?e.status:e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},updateUser:function(e,t){return fetch("/api/users/".concat(e),{method:"PUT",body:JSON.stringify(Object(s.a)({},t,{username:e})),headers:{"Content-Type":"application/json"}}).then((function(e){return 200!==e.status?e.status:e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))}},y="Buildv1.5-H";var N=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),N=Object(i.a)(c,2),v=N[0],O=N[1],k=Object(n.useState)([]),j=Object(i.a)(k,2),S=j[0],C=j[1],I=Object(n.useState)({name:"login"}),_=Object(i.a)(I,2),A=_[0],D=_[1],T=Object(n.useState)(!1),U=Object(i.a)(T,2),P=U[0],R=U[1],x=Object(n.useState)({active:!1}),L=Object(i.a)(x,2),B=L[0],M=L[1];function F(e){e.persist(),B.accessToken?(console.log("Now that's efficency!"),Z(e.target,B.accessToken)):X(A.username,e)}return(Object(n.useEffect)((function(){console.log("Using effect"),d.a.currentAuthenticatedUser().then((function(e){X(e.username,{}),D(Object(s.a)({},A,{username:e.username})),!0!==a&&l(!0),!0!==v&&$(e.username)})).catch((function(e){console.log(e),!1!==a&&l(!1),!0!==v&&(localStorage.getItem("registered")?O(!0):O(!1))})),localStorage.getItem("hasDownloaded")?R(!0):!1!==P&&R(!1)}),[]),o.a.createElement("div",null,o.a.createElement(u.a,null,o.a.createElement(E,{isLoggedIn:!!a}),o.a.createElement(m.b,{exact:!0,path:"/login",render:function(e){return o.a.createElement(p,Object.assign({},e,{isRegistered:!!v,signIn:Y,signUp:K,handleInputChange:G,isLoggedIn:a,handleHasRegistered:q}))}}),o.a.createElement(m.b,{exact:!0,path:"/home",render:function(e){return o.a.createElement(h,Object.assign({},e,{signOut:V}))}}),o.a.createElement(m.b,{exact:!0,path:"/play",render:function(e){return o.a.createElement(g,Object.assign({},e,{handleDownload:H,handleDownloadLost:z,hasDownloaded:P,build:y,setAccessToken:F,displaySuccess:B.displaySuccess}))}}),o.a.createElement(m.b,{exact:!0,path:"/data",render:function(e){return o.a.createElement(f,Object.assign({},e,{players:S,DB_getPlayers:J}))}}),o.a.createElement(m.b,{exact:!0,path:"/about",render:function(e){return o.a.createElement(b,e)}}),o.a.createElement(m.b,{path:"/*",render:function(e){if(!a)return o.a.createElement(m.a,{to:"/login"})}}))));function J(){w.getPlayers().then((function(e){console.log(e),C(e)})).catch((function(e){console.error(e)}))}function W(e){return new Promise((function(t,a){w.getUser(e).then((function(e){e.length>0?(console.log(e),console.log("Found reference to user in MongoDB"),t(JSON.stringify(e))):t(null)})).catch((function(e){console.error(e),a(e)}))}))}function G(e){var t=e.target,a=t.value,n=t.name;console.log("value : ".concat(a)),console.log("name : ".concat(n)),D(Object(s.a)({},A,Object(r.a)({},n,a)))}function H(e){localStorage.setItem("hasDownloaded",!0),!0!==P&&R(!0)}function z(e){localStorage.removeItem("hasDownloaded"),!1!==P&&R(!1)}function Z(e,t){if(e)if("data-token"!==e.id&&"download-btn"!==e.id)console.log("We did not click on the button"),Z(e.parentNode,t);else{var a=t,n=document.createElement("textarea");n.value=a,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),console.log("Copied to clipboard!"),B.displaySuccess||(M(Object(s.a)({},B,{accessToken:a,displaySuccess:!0})),setTimeout((function(){M(Object(s.a)({},B,{accessToken:a,displaySuccess:!1}))}),2e3))}}function q(){O(!0)}function Y(e){if(e.preventDefault(),A)if(A.username&&A.password){var t=A.username,a=A.password;d.a.signIn(t,a).then((function(e){Q(t)})).catch((function(e){console.log(e)}))}else console.warn("Missing username or password for login")}function K(e){if(A)if(A.username&&A.password&&A.email){var t=A.username,a=A.password,n=A.email;W(t).then((function(e){e?alert("Username is taken"):d.a.signUp({username:t,password:a,attributes:{email:n}}).then((function(e){Q(t)})).catch((function(e){console.log(e),console.warn("Could not log in")}))})).catch((function(e){console.log(e)}))}else console.warn("We do not have a filled username, password, and/or, email")}function Q(e){$(e),l(!0)}function V(){d.a.signOut().then((function(e){l(!1)})).catch((function(e){return console.log(e)}))}function X(e,t){d.a.currentSession().then((function(a){console.log("setting access token"),console.log("^".repeat(60));var n=a.getAccessToken().getJwtToken();M(Object(s.a)({},B,{accessToken:n})),function(e,t){w.updateUser(e,t).then((function(e){console.log(e),console.log("Updated user data")})).catch((function(e){console.log(e)}))}(e,{accessToken:n}),function(e){var t={username:e};W(e).then((function(a){a?console.log('"User, '.concat(e,' is already registered"')):(console.log('"Registering user, '.concat(e,', to Mongo DB..."')),w.createUser(t).then((function(e){console.log(e),console.log("successfully created a user in our MongoDB!")})).catch((function(e){console.error(e)})))})).catch((function(e){console.log(e)}))}(e),t.target&&Z(t.target,n)})).catch((function(e){console.error(e),console.error("Could not get current session data")}))}function $(e){localStorage.setItem("registered",e),O(!0)}},v={aws_project_region:"us-west-2",aws_cognito_identity_pool_id:"us-west-2:86736dd0-37e3-40b1-855c-74b662e25a2b",aws_cognito_region:"us-west-2",aws_user_pools_id:"us-west-2_NMn2yeWJ4",aws_user_pools_web_client_id:"58loi7nseg85g322jcphun0ql9",oauth:{domain:"unitynodeauth8acddaf0-8acddaf0-local.auth.us-west-2.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"http://localhost:3000/",redirectSignOut:"http://localhost:3000/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS"};d.b.configure(v),c.a.render(o.a.createElement(N,null),document.getElementById("root"))},57:function(e,t){}},[[137,1,2]]]);
//# sourceMappingURL=main.ff730d6c.chunk.js.map