(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{137:function(e,t,a){e.exports=a(568)},142:function(e,t,a){},56:function(e,t){},560:function(e,t){},563:function(e,t,a){},568:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(126),o=a.n(c),r=(a(142),a(47)),s=a(127),i=a(29),m=a(17),u=a(25),d=a(26);a(537),a(563);var h=function(e){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:e.signOut},l.a.createElement("h2",{className:"m-2"},"Sign Out"))))};var p=function(e){return Object(n.useEffect)((function(){}),[]),l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},e.isLoggedIn?l.a.createElement(m.b,{to:"/about"},"About"):e.isRegistered?l.a.createElement("div",null,l.a.createElement("h1",{className:"header-light"}," Welcome back!"),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"username",className:"header-light"},"Username"),l.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",name:"username",onChange:e.handleInputChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password",className:"header-light"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",name:"password",onChange:e.handleInputChange})),l.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-primary",onClick:e.signIn},l.a.createElement("h2",null,"Sign in")))):l.a.createElement("div",null,l.a.createElement("h1",null," Greetings Newcomer"),"Refresh the page once you've signed up.  This is a bug I haven't fixed yet.",l.a.createElement("br",null),l.a.createElement("button",{type:"submit",value:"Submit",className:"my-3 btn btn-primary",onClick:e.signIn},"Sign up"))))};var g=function(e){var t="/assets/game-builds/"+e.build+".zip";return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header light-yellow"},e.hasDownloaded?l.a.createElement("div",null,l.a.createElement("h1",null,"You've downloaded the game!"),l.a.createElement("h4",{className:"my-3"},e.accessToken?l.a.createElement("span",{className:"highlight"},"Copied to clipboard!"):l.a.createElement("span",null,"Get your access token here")),l.a.createElement("button",{id:"data-token",type:"button",className:"btn btn-primary",onClick:e.setAccessToken,"data-token":e.accessToken},l.a.createElement("h2",{className:"m-2"},"Access Token")),l.a.createElement("h5",{className:"mt-5"},"If you can't find the download in your downloads folder, press the button below"),l.a.createElement("button",{onClick:e.handleDownloadLost,type:"button",className:"btn btn-warning my-3"},"Lost Download")):l.a.createElement("div",null,l.a.createElement("h1",null,"Download Instructions"),l.a.createElement("h5",null,"If you don't have software to open ZIP files, follow the WinRAR link below."),l.a.createElement("h5",null,"Once you've downloaded the ZIP file, open the file and run the 'launch.exe' file to play."),l.a.createElement("h4",{className:"mt-4"},"WinRAR 'trial' download"),l.a.createElement("a",{className:"winRAR",href:"https://www.rarlab.com/rar/winrar-x64-580.exe"}," Windows "),l.a.createElement("a",{className:"winRAR",href:"https://www.rarlab.com/rar/rarosx-5.8.0.tar.gz"}," Mac "),l.a.createElement("h4",{className:"mt-3 mb-2"},"Download my Game!"),l.a.createElement("button",{htmlFor:"download-link",type:"button",className:"btn btn-primary mt-3"},l.a.createElement(m.b,{id:"download-link",onClick:e.handleDownload,to:t,target:"_blank",download:!0},l.a.createElement("h3",null,"Download"))))))};var b=function(e){return Object(n.useEffect)((function(){e.DB_getPlayers(),console.log("Using data effect")}),[]),l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header light-yellow"},l.a.createElement("h1",null,"Data"),l.a.createElement("h3",null,"Connected Players"),e.players?function(e){var t=e.players;return l.a.createElement("div",null,t.map((function(e){return e.key=Math.random(),l.a.createElement("div",null,"Default_Player"===e.username?null:l.a.createElement("h3",null,e.username))})))}(e):l.a.createElement("p",null,"No players connected")))};var f=function(e){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header light-yellow"},l.a.createElement("h1",null,"About Me"),l.a.createElement("h3",null,"I'm Brian Graf")))};var E=function(e){return console.log(e),e.isLoggedIn?l.a.createElement("ul",{className:"nav justify-content-center pt-2"},e.isLoggedIn?null:l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/login",className:"nav-link"},l.a.createElement("h3",null,"Login/Register"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/play",className:"nav-link"},l.a.createElement("h3",null,"Download"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/data",className:"nav-link"},l.a.createElement("h3",null,"Data"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/about",className:"nav-link"},l.a.createElement("h3",null,"About"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/home",className:"nav-link"},l.a.createElement("h3",null,"Sign Out")))):null},w={getPlayers:function(){return fetch("api/players").then((function(e){if(200!==e.status){console.error("problem found with status code : ".concat(e.status)),console.warn("Returning dummy response");return[{_id:"12345abc_dummy",connection_id:"D5e315_dummy",username:"Dummy Player",connected:!0,__v:0,key:.333334}]}return e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))}},v="Buildv1.3-Heroku";var y=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),y=Object(i.a)(o,2),N=y[0],k=y[1],O=Object(n.useState)([]),I=Object(i.a)(O,2),_=I[0],j=I[1],A=Object(n.useState)({name:"login"}),S=Object(i.a)(A,2),D=S[0],C=S[1],T=Object(n.useState)(!1),R=Object(i.a)(T,2),x=R[0],P=R[1],L=Object(n.useState)({active:!1}),B=Object(i.a)(L,2),G=B[0],U=B[1];function W(e){e.persist(),d.a.currentSession().then((function(t){var a=t.getAccessToken().getJwtToken();U({accessToken:a}),function e(t){if(t)if("data-token"!==t.id)console.log("We did not click on the button"),e(t.parentNode);else{var a=t.getAttribute("data-token"),n=document.createElement("textarea");n.value=a,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),console.log("Copied to clipboard!"),setTimeout((function(){U({accessToken:null})}),2e3)}}(e.target)}))}return(Object(n.useEffect)((function(){console.log("Using effect"),d.a.currentAuthenticatedUser().then((function(e){!0!==a&&c(!0),!0!==N&&Z(e.username)})).catch((function(e){console.log(e),!1!==a&&c(!1),!0!==N&&(localStorage.getItem("registered")?k(!0):k(!1))})),localStorage.getItem("hasDownloaded")?P(!0):!1!==x&&P(!1),G.active||(U({active:!0}),setInterval((function(){z(),console.log(G)}),1e4))}),[]),l.a.createElement("div",null,l.a.createElement(m.a,null,l.a.createElement(E,{isLoggedIn:!!a}),l.a.createElement(u.b,{exact:!0,path:"/login",render:function(e){return l.a.createElement(p,Object.assign({},e,{isRegistered:!!N,signIn:q,handleInputChange:F,isLoggedIn:a}))}}),l.a.createElement(u.b,{exact:!0,path:"/home",render:function(e){return l.a.createElement(h,Object.assign({},e,{signOut:H}))}}),l.a.createElement(u.b,{exact:!0,path:"/play",render:function(e){return l.a.createElement(g,Object.assign({},e,{handleDownload:J,handleDownloadLost:M,hasDownloaded:x,build:v,setAccessToken:W,accessToken:G.accessToken}))}}),l.a.createElement(u.b,{exact:!0,path:"/data",render:function(e){return l.a.createElement(b,Object.assign({},e,{players:_,DB_getPlayers:z}))}}),l.a.createElement(u.b,{exact:!0,path:"/about",render:function(e){return l.a.createElement(f,e)}}),l.a.createElement(u.b,{path:"/*",render:function(e){if(!a)return l.a.createElement(u.a,{to:"/login"})}}))));function z(){w.getPlayers().then((function(e){console.log(e),j(e)})).catch((function(e){console.log(e)}))}function F(e){var t=e.target,a=t.value,n=t.name;C(Object(s.a)({},D,Object(r.a)({},n,a)))}function J(e){localStorage.setItem("hasDownloaded",!0),!0!==x&&P(!0)}function M(e){localStorage.removeItem("hasDownloaded"),!1!==x&&P(!1)}function q(e){if(e.preventDefault(),N){if(D&&D.username&&D.password){var t=D.username,a=D.password;d.a.signIn(t,a).then((function(e){Z(t),c(!0)})).catch((function(e){console.log(e)}))}}else d.a.federatedSignIn()}function H(){d.a.signOut().then((function(e){c(!1)})).catch((function(e){return console.log(e)}))}function Z(e){localStorage.setItem("registered",e),k(!0)}},N={aws_project_region:"us-west-2",aws_cognito_identity_pool_id:"us-west-2:d48f9b4c-4c1b-49f2-b430-bf4c88376e71",aws_cognito_region:"us-west-2",aws_user_pools_id:"us-west-2_4cvqCwkth",aws_user_pools_web_client_id:"25ov25rr8a1v03g8j6s1edc3rq",oauth:{domain:"unitynodeauth9f7ddbe2-9f7ddbe2-local.auth.us-west-2.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"http://localhost:3000/",redirectSignOut:"http://localhost:3000/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS"};d.b.configure(N),o.a.render(l.a.createElement(y,null),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.c74e3ed0.chunk.js.map