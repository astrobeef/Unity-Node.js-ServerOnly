(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{114:function(e,t,a){e.exports=a(519)},119:function(e,t,a){},51:function(e,t){},514:function(e,t,a){},519:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(104),r=a.n(c),o=(a(119),a(42)),s=a(20),i=a(27),u=a(17),m=a(26),d=a(22);a(514);var h=function(e){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:e.signOut},l.a.createElement("h2",{className:"m-2"},"Sign Out"))))};var g=function(e){return Object(n.useEffect)((function(){}),[]),l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:e.isLoggedIn?"App-header":"App-header bg-blue"},e.isLoggedIn?l.a.createElement(u.b,{to:"/about"},"About"):e.isRegistered?l.a.createElement("div",null,l.a.createElement("h1",{className:"header-light"}," Welcome back!"),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"username",className:"header-light"},"Username"),l.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",name:"username",onChange:e.handleInputChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password",className:"header-light"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",name:"password",onChange:e.handleInputChange})),l.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-primary",onClick:e.signIn},l.a.createElement("h2",null,"Sign in")))):l.a.createElement("div",null,l.a.createElement("h1",null," Greetings Newcomer"),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email",className:"header-light"},"Email"),l.a.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",name:"email",onChange:e.handleInputChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"username",className:"header-light"},"Username"),l.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",name:"username",onChange:e.handleInputChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password",className:"header-light"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",name:"password",onChange:e.handleInputChange}))),l.a.createElement("button",{type:"submit",value:"Submit",className:"my-3 btn btn-primary",onClick:e.signUp},l.a.createElement("h2",null,"Sign up")),l.a.createElement("h5",{className:"header-light"}," Already have an accout?"),l.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-primary",onClick:e.handleHasRegistered},l.a.createElement("h4",null,"Sign in")))))};var p=function(e){var t="/assets/game-builds/"+e.build+".zip";return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header light-yellow"},e.hasDownloaded?l.a.createElement("div",null,l.a.createElement("h1",null,"You've downloaded the game!"),l.a.createElement("h4",{className:"my-3"},e.displaySuccess?l.a.createElement("span",{className:"highlight"},"Copied to clipboard!"):l.a.createElement("span",null,"Get your access token here")),l.a.createElement("button",{id:"data-token",type:"button",className:"btn btn-primary",onClick:e.setAccessToken},l.a.createElement("h2",{className:"m-2"},"Access Token")),l.a.createElement("h5",{className:"mt-5"},"If you can't find the download in your downloads folder, press the button below"),l.a.createElement("button",{onClick:e.handleDownloadLost,type:"button",className:"btn btn-warning my-3"},"Lost Download")):l.a.createElement("div",null,l.a.createElement("h1",null,"Download Instructions"),l.a.createElement("h5",null,"If you don't have software to open ZIP files, follow the WinRAR link below."),l.a.createElement("h5",null,"Once you've downloaded the ZIP file, open the file and run the 'launch.exe' file to play."),l.a.createElement("h4",{className:"mt-4"},"WinRAR 'trial' download"),l.a.createElement("a",{className:"winRAR",href:"https://www.rarlab.com/rar/winrar-x64-580.exe"}," Windows "),l.a.createElement("a",{className:"winRAR",href:"https://www.rarlab.com/rar/rarosx-5.8.0.tar.gz"}," Mac "),l.a.createElement("h4",{className:"mt-3 mb-2"},"Download my Game!"),l.a.createElement("button",{id:"download-btn",htmlFor:"download-link",type:"button",className:"btn btn-primary mt-3",onClick:e.setAccessToken},l.a.createElement(u.b,{id:"download-link",onClick:e.handleDownload,to:t,target:"_blank",download:!0},l.a.createElement("h3",null,"Download"))))))};var f=function(e){return Object(n.useEffect)((function(){e.DB_getPlayers(),e.DB_getMessages()}),[]),l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"light-yellow"},l.a.createElement("h1",{className:"mt-20 py-5"},"Data"),l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-5"},l.a.createElement("h3",null,"Connected Players"),e.players?function(e){var t=e.players,a=!1;return l.a.createElement("div",null,t.map((function(e){return e.key=Math.random(),l.a.createElement("div",null,"Default_Player"===e.username?null:l.a.createElement("h3",null,e.username,a=!0),l.a.createElement("br",null))})),a?null:l.a.createElement("span",null,"There are no players connected to any game lobbies"))}(e):l.a.createElement("p",null,"No players connected")),l.a.createElement("div",{className:"col-5"},l.a.createElement("h3",null,"Global Message Board"),l.a.createElement("ul",{className:"list-group text-left"},e.generateMessages(),l.a.createElement("input",{id:"message-input",name:"message",className:"list-group-item my-1",type:"text",placeholder:"Type a message...",onChange:e.handleInputChange,value:e.message}),l.a.createElement("button",{className:"list-group-item col-3",onClick:e.handleSendMessage},"Send message"))))))};var b=function(e){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header light-yellow"},l.a.createElement("h1",null,"About Me"),l.a.createElement("h3",null,"I'm Brian Graf")))};var E=function(e){return e.isLoggedIn?l.a.createElement("ul",{className:"nav justify-content-center pt-2"},e.isLoggedIn?null:l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/login",className:"nav-link"},l.a.createElement("h3",null,"Login/Register"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/play",className:"nav-link"},l.a.createElement("h3",null,"Download"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/data",className:"nav-link"},l.a.createElement("h3",null,"Data"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/about",className:"nav-link"},l.a.createElement("h3",null,"About"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/home",className:"nav-link"},l.a.createElement("h3",null,"Sign Out")))):null},y={getPlayers:function(){return fetch("api/players").then((function(e){if(200!==e.status){console.error("problem found with status code : ".concat(e.status)),console.warn("Returning dummy response");return[{_id:"12345abc_dummy",connection_id:"D5e315_dummy",username:"Dummy Player",connected:!0,__v:0,key:.333334}]}return e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},getUser:function(e){return fetch("/api/users/".concat(e)).then((function(e){return 200!==e.status&&console.error("problem found with status code : ".concat(e.status)),e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},createUser:function(e){return fetch("api/users/create",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 200!==e.status?e.status:e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},updateUser:function(e,t){return fetch("/api/users/".concat(e),{method:"PUT",body:JSON.stringify(Object(s.a)({},t,{username:e})),headers:{"Content-Type":"application/json"}}).then((function(e){return 200!==e.status?e.status:e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},getMessages:function(){return fetch("api/messages").then((function(e){return e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))},createMessage:function(e){return fetch("/api/messages/create",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 200!==e.status?e.status:e.json().then((function(e){return e}))})).catch((function(e){console.log("fetch error : ".concat(e))}))}},w="Buildv1.7-H";var N=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),N=Object(i.a)(r,2),v=N[0],O=N[1],j=Object(n.useState)([]),S=Object(i.a)(j,2),k=S[0],C=S[1],I=Object(n.useState)({name:"login",message:""}),_=Object(i.a)(I,2),D=_[0],T=_[1],A=Object(n.useState)(!1),M=Object(i.a)(A,2),P=M[0],R=M[1],x=Object(n.useState)({active:!1}),U=Object(i.a)(x,2),L=U[0],B=U[1],J=Object(n.useState)(null),W=Object(i.a)(J,2),F=W[0],G=W[1];function H(e){e.persist(),L.accessToken?(console.log("Now that's efficency!"),X(e.target,L.accessToken)):ce(D.username,e)}return(Object(n.useEffect)((function(){d.a.currentAuthenticatedUser().then((function(e){ce(e.username,{}),T(Object(s.a)({},D,{username:e.username})),!0!==a&&c(!0),!0!==v&&re(e.username)})).catch((function(e){console.log(e),!1!==a&&c(!1),!0!==v&&(localStorage.getItem("registered")?O(!0):O(!1))})),localStorage.getItem("hasDownloaded")?R(!0):!1!==P&&R(!1),L.active||(B(Object(s.a)({},L,{active:!0})),setInterval((function(){Z(),Y()}),1e4))}),[]),l.a.createElement("div",null,l.a.createElement(u.a,null,l.a.createElement(E,{isLoggedIn:!!a}),l.a.createElement(m.b,{exact:!0,path:"/login",render:function(e){return l.a.createElement(g,Object.assign({},e,{isRegistered:!!v,signIn:te,signUp:ae,handleInputChange:K,isLoggedIn:a,handleHasRegistered:$}))}}),l.a.createElement(m.b,{exact:!0,path:"/home",render:function(e){return l.a.createElement(h,Object.assign({},e,{signOut:le}))}}),l.a.createElement(m.b,{exact:!0,path:"/play",render:function(e){return l.a.createElement(p,Object.assign({},e,{handleDownload:Q,handleDownloadLost:V,hasDownloaded:P,build:w,setAccessToken:H,displaySuccess:L.displaySuccess}))}}),l.a.createElement(m.b,{exact:!0,path:"/data",render:function(e){return l.a.createElement(f,Object.assign({},e,{players:k,DB_getPlayers:Z,generateMessages:z,DB_getMessages:Y,handleInputChange:K,message:D.message,handleSendMessage:ee}))}}),l.a.createElement(m.b,{exact:!0,path:"/about",render:function(e){return l.a.createElement(b,e)}}),l.a.createElement(m.b,{path:"/*",render:function(e){if(!a)return l.a.createElement(m.a,{to:"/login"})}}))));function z(){return F&&F[0].message.trim().length>1?F.map((function(e){return l.a.createElement("li",{key:Math.random(),className:"list-group-item"},l.a.createElement("b",null,e.username," : "),e.message)})):null}function Z(){y.getPlayers().then((function(e){C(e)})).catch((function(e){console.error(e)}))}function q(e){return new Promise((function(t,a){y.getUser(e).then((function(e){e.length>0?t(JSON.stringify(e)):t(null)})).catch((function(e){console.error(e),a(e)}))}))}function Y(){return new Promise((function(e,t){y.getMessages().then((function(t){t&&t.length>0&&(t.length>5?(console.log("Too many messages in MongoDB to display them all"),G(t.slice(t.length-5,t.length))):G(t)),e(t)})).catch((function(e){console.error(e),t(e)}))}))}function K(e){var t=e.target,a=t.value,n=t.name;T(Object(s.a)({},D,Object(o.a)({},n,a)))}function Q(e){localStorage.setItem("hasDownloaded",!0),!0!==P&&R(!0)}function V(e){localStorage.removeItem("hasDownloaded"),!1!==P&&R(!1)}function X(e,t){if(e)if("data-token"!==e.id&&"download-btn"!==e.id)console.log("We did not click on the button"),X(e.parentNode,t);else{var a=t,n=document.createElement("textarea");n.value=a,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),console.log("Copied to clipboard!"),L.displaySuccess||(B(Object(s.a)({},L,{accessToken:a,displaySuccess:!0})),setTimeout((function(){B(Object(s.a)({},L,{accessToken:a,displaySuccess:!1}))}),2e3))}}function $(){O(!0)}function ee(e){var t={username:D.username,message:D.message};t.message.trim().length>2?(y.createMessage(t),T(Object(s.a)({},D,{message:""}))):console.log("Message was too short.  Did not send")}function te(e){if(e.preventDefault(),D)if(D.username&&D.password){var t=D.username,a=D.password;d.a.signIn(t,a).then((function(e){ne(t)})).catch((function(e){console.log(e)}))}else console.warn("Missing username or password for login")}function ae(e){return D.username?void d.a.federatedSignIn().then((function(e){ne(D.username)})):void alert("Enter a username")}function ne(e){re(e),c(!0)}function le(){d.a.signOut().then((function(e){c(!1)})).catch((function(e){return console.log(e)}))}function ce(e,t){d.a.currentSession().then((function(a){var n=a.getAccessToken().getJwtToken();B(Object(s.a)({},L,{accessToken:n})),function(e,t){y.updateUser(e,t).then((function(e){})).catch((function(e){console.log(e)}))}(e,{accessToken:n}),function(e){var t={username:e};q(e).then((function(e){e||y.createUser(t).then((function(e){})).catch((function(e){console.error(e)}))})).catch((function(e){console.log(e)}))}(e),t.target&&X(t.target,n)})).catch((function(e){console.error(e),alert("We could not get your user information.  Have you verified your email?"),console.error("Could not get current session data")}))}function re(e){localStorage.setItem("registered",e),O(!0)}},v={aws_project_region:"us-west-2",aws_cognito_identity_pool_id:"us-west-2:86736dd0-37e3-40b1-855c-74b662e25a2b",aws_cognito_region:"us-west-2",aws_user_pools_id:"us-west-2_NMn2yeWJ4",aws_user_pools_web_client_id:"58loi7nseg85g322jcphun0ql9",oauth:{domain:"unitynodeauth8acddaf0-8acddaf0-local.auth.us-west-2.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"http://localhost:3000/",redirectSignOut:"http://localhost:3000/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS"};d.b.configure(v),r.a.render(l.a.createElement(N,null),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.43c77c85.chunk.js.map